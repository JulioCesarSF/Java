package br.com.fiap.testes;

import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import javax.swing.JOptionPane;

import br.com.fiap.beans.Funcionario;
import br.com.fiap.excecoes.Excecoes;

public class Teste {
	/* 1. Retornar o total de funcionários cadastrados */
	public static int totalFuncionarios(List<?> f) {
		return f.size();
	}

	/* 2. Retornar a média geral dos salários */
	public static String mediaSalario(List<Funcionario> f) {
		NumberFormat n = NumberFormat.getCurrencyInstance();
		double media = 0d;
		for (Funcionario ff : f)
			media += ff.getSalario();
		return n.format(media /= f.size());
	}

	public static double mediaSalarioDouble(List<Funcionario> f) {
		double media = 0d;
		for (Funcionario ff : f)
			media += ff.getSalario();
		return media /= f.size();
	}

	/* 3. Retornar o total da folha de pagamento */
	public static String totalFolha(List<Funcionario> f) {
		NumberFormat n = NumberFormat.getCurrencyInstance();
		double total = 0d;
		for (Funcionario ff : f)
			total += ff.getSalario();
		return n.format(total);
	}

	public static double totalFolhaDouble(List<Funcionario> f) {
		double total = 0d;
		for (Funcionario ff : f)
			total += ff.getSalario();
		return total;
	}

	/* 4. Imprimir os nomes de todos os funcionários */
	public static String imprimirTodos(List<Funcionario> f) {
		StringBuilder nomes = new StringBuilder();
		for (Funcionario ff : f)
			nomes.append(ff.getNome() + "\n");
		return nomes.toString();
	}

	/*
	 * 5. Imprimir os nomes e salários de todos os fucnionários em odem
	 * crescente de salário
	 */
	public static String imprimirNomesSalarioCrescente(List<Funcionario> f) {

		Collections.sort(f);

		StringBuilder lista = new StringBuilder();

		NumberFormat n = NumberFormat.getCurrencyInstance();

		for (Funcionario ff : f)
			lista.append("\nNome:\t" + ff.getNome() + " Salário:\t" + n.format(ff.getSalario()));
		return lista.toString();
	}

	public static void main(String[] args) throws Excecoes {

		Helper h = new Helper(); // static inner class

		List<Funcionario> f = new ArrayList<>();

		try {

			Funcionario ff = null;

			while (h.aA("Cadastrar NOVO funcionário?", "Novo funcionário") != 1) {

				ff = new Funcionario(h.a("Nome?"), h.a("Cargo"), Double.parseDouble(h.a("Salário?")),
						Integer.parseInt(h.a("Faltas?")));

				f.add(ff);
			}

			System.out.println("1. Total de funcionários cadastrados:\t" + totalFuncionarios(f));
			System.out.println("2. Média geral dos salários:\t" + mediaSalario(f));
			System.out.println("3. Total da folha de pagamento:\t" + totalFolha(f));
			System.out.println("4. Nomes de todos os funcionários:\n" + imprimirTodos(f));
			System.out.println("5. Nomes e salários em ordem crescente:\n" + imprimirNomesSalarioCrescente(f));

		} catch (Exception e) {
			throw new Excecoes("-> Erro", e);
		} finally {
			System.out.println("Fim da Execução.");
		}

	}

	public static class Helper {
		public String a(String q) {
			return JOptionPane.showInputDialog(q);
		}

		public int aA(String q, String t) {
			return JOptionPane.showConfirmDialog(null, q, t, JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
		}
	}

}
